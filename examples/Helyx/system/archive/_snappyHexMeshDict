FoamFile
{
    version 2.0;
    format ascii;
    class dictionary;
    location system;
    object snappyHexMeshDict;
}

castellatedMesh true;
snap true;
addLayers true;
autoBlockMesh true;
blockData (24.0 0);
crackDetection true;
crackTol 0.05;
finalDecomposition ptscotch;
geometry
{
        _ref01.stl
        {
            type triSurfaceMesh;
            name _ref01;
            appendRegionName false;
        }
        _ref02.stl
        {
            type triSurfaceMesh;
            name _ref02;
            appendRegionName false;
        }
        _ref03.stl
        {
            type triSurfaceMesh;
            name _ref03;
            appendRegionName false;
        }
        _refSphere.stl
        {
            type triSurfaceMesh;
            name _refSphere;
            appendRegionName false;
        }
        bottom.stl
        {
            type triSurfaceMesh;
            name bottom;
            appendRegionName false;
        }
        inlet.stl
        {
            type triSurfaceMesh;
            name inlet;
            appendRegionName false;
        }
        inlet_chimney.stl
        {
            type triSurfaceMesh;
            name inlet_chimney;
            appendRegionName false;
        }
        left.stl
        {
            type triSurfaceMesh;
            name left;
            appendRegionName false;
        }
        offsite_bld.stl
        {
            type triSurfaceMesh;
            name offsite_bld;
            appendRegionName false;
        }
        onsite_bld.stl
        {
            type triSurfaceMesh;
            name onsite_bld;
            appendRegionName false;
        }
        outlet.stl
        {
            type triSurfaceMesh;
            name outlet;
            appendRegionName false;
        }
        right.stl
        {
            type triSurfaceMesh;
            name right;
            appendRegionName false;
        }
        source_area.stl
        {
            type triSurfaceMesh;
            name source_area;
            appendRegionName false;
        }
        terrain.stl
        {
            type triSurfaceMesh;
            name terrain;
            appendRegionName false;
        }
        terrain_out.stl
        {
            type triSurfaceMesh;
            name terrain_out;
            appendRegionName false;
        }
        top.stl
        {
            type triSurfaceMesh;
            name top;
            appendRegionName false;
        }
}

castellatedMeshControls
{
    features
    (
            {
                file "offsite_bld_line.eMesh";
                levels ( ( 0.0 6 ) );
                refineFeatureEdgesOnly false;
            }
            {
                file "onsite_bld_line.eMesh";
                levels ( ( 0.0 6 ) );
                refineFeatureEdgesOnly false;
            }
            {
                file "onsite_bld_line0.eMesh";
                levels ( ( 0.0 6 ) );
                refineFeatureEdgesOnly false;
            }				
    );
	
    refinementSurfaces
    {
            {
                level ( 0 0 );
            }
            inlet
            {
                level ( 0 0 );
            }
            inlet_chimney
            {
                level ( 6 6 );
                proximityIncrement 1;
                maxCellsAcrossGap 3;
            }
            left
            {
                level ( 0 0 );
            }
            offsite_bld
            {
                level ( 6 6 );
                proximityIncrement 1;
                maxCellsAcrossGap 3;
            }
            onsite_bld
            {
                level ( 6 6 );
                proximityIncrement 1;
                maxCellsAcrossGap 3;
            }
            outlet
            {
                level ( 0 0 );
            }
            right
            {
                level ( 0 0 );
            }
            terrain
            {
                level ( 3 3 );
            }
            terrain_out
            {
                level ( 1 1 );
            }
            top
            {
                level ( 0 0 );
            }
    }

    refinementRegions
    {		
            _ref01
            {
                mode inside;
                levels ( ( 100000.0 1 ) );
            }
            _ref02
            {
                mode inside;
                levels ( ( 100000.0 3 ) );
            }
            _ref03
            {
                mode inside;
                levels ( ( 100000.0 4 ) );
            }
            _refSphere
            {
                mode inside;
                levels ( ( 100000.0 7 ) );
            }
            inlet_chimney
            {
                mode distance;
                levels ( ( 32.0 5 ) );
            }
            offsite_bld
            {
                mode distance;
                levels ( ( 32.0 4 ) );
            }
            onsite_bld
            {
                mode distance;
                levels ( ( 32.0 4 ) );
            }
            source_area
            {
                mode inside;
                levels ( ( 100000.0 5 ) );
            }
            terrain
            {
                mode distance;
                levels ( ( 16.0 3 ) ( 32.0 2 ) ( 64.0 1 ) );
            }
            terrain_out
            {
                mode distance;
                levels ( ( 64.0 1 ) );
            }
    }

    locationInMesh (0 0 200);
    maxLocalCells 100000000;
    maxGlobalCells 100000000;
    minRefinementCells 100;
    nCellsBetweenLevels 4;
    resolveFeatureAngle -60.;
    featureRefineAngle 20.;
    refineSurfaceBoundary false;
    refineFeatureEdgesOnly false;
    minBaffleAngle -60.;
    curvatureRefineAngle -60.;
    allowFreeStandingZoneFaces false;
    balanceThenRefine true;
    maxLoadUnbalance 0.10;
    splitCells false;
    minZoneRegionSize 0;
    wrapper
    {
        wrap false;
        volSources true;
        volDistance 1.0;
        meshInMM false;
        maxIter 200;
        writeFields false;
        invert false;
        sigma 3.0;
        cutoff 1000;
    }

}

snapControls
{
    featureEdges
    {

    }

    nOuterIter 1;
    nPreFeatureIter 0;
    nSolveIter 10;
    nFeatureIter 60;
    globalFeatureEdges true;
    globalRegionSnap true;
    nSmoothPatch 2;
    tolerance 4.0;
    nRelaxIter 5;
    zoneFeatureSnapping true;
    directFeatureSnapping true;
    regionFeatureLines false;
    geometryFeatureLines true;
    snapSurfBoundary true;
    collapseTol 0.25;
    enlargeStencil true;
    featureSnapChecks true;
    smoothSnappedSurface true;
    splitDegenerateCells true;
    explicitFeatureSnap true;
    implicitFeatureSnap false;
    nSliverSmooths 10;
}

addLayersControls
{
    layers
    {
            offsite_bld
            {
                nSurfaceLayers 4;
                finalLayerThickness 0.4;
                expansionRatio 1.25;
                grownUp false;
            }
			
            onsite_bld
            {
                nSurfaceLayers 4;
                finalLayerThickness 0.4;
                expansionRatio 1.25;
                grownUp false;
            }
			
			terrain
            {
                nSurfaceLayers 4;
                finalLayerThickness 0.4;
                expansionRatio 1.25;
                grownUp false;
            }
			
			terrain_out
            {
                nSurfaceLayers 4;
                finalLayerThickness 0.4;
                expansionRatio 1.25;
                grownUp false;
            }

			
            left
            {
                nSurfaceLayers 0;
                grownUp true;
            }
			
			right
            {
                nSurfaceLayers 0;
                grownUp true;
            }
			
            inlet_chimney
            {
                nSurfaceLayers 0;
                grownUp true;
            }
			
            inlet
            {
                nSurfaceLayers 0;
                grownUp true;
            }	
			
			outlet
            {
                nSurfaceLayers 0;
                grownUp true;
            }	
    }

    relativeSizes true;
    expansionRatio 1.25;
    finalLayerThickness 0.4;
    minThickness 0.2;
    featureAngleMerge 45;
    featureAngleTerminate 80;
    nRelaxIter 5;
    nRelaxedIter 1000;
    maxFaceThicknessRatio 2.0;
    maxThicknessToMedialRatio 0.3;
    minMedialAxisAngle 90;
    noErrors false;
    maxLayerIter 30;
    projectGrownUp 0.0;
    preBalance false;
    growConvexEdge true;
    growConcaveEdge true;
    growZoneLayers false;
    growUpPatches true;
    nSmoothSurfaceNormals 6;
    nSmoothNormals 3;
    maxCellDistortion 50;
    maxProjectionDistance 1e15;
    layerRecovery 1;
    writeVTK true;
}

meshQualityControls
{
    nVolSmoothIter 8;
    maxNonOrtho 70;
    maxBoundarySkewness 20;
    maxInternalSkewness 6;
    maxConcave 80;
    minFlatness 0.5;
    minVol 1e-14;
    minTetQuality -1e30;
    minArea 1e-13;
    minTwist 0.05;
    minDeterminant 0.0001;
    minFaceWeight 0.08;
    minVolRatio 0.02;
    minTriangleTwist -0.99;
    minVolCollapseRatio -1;
    minInternalWarpage -1;
    maxBoundaryWarpage -1;
    faceFaceCells true;
    minSnapRelativeVolume -1;
    nSmoothScale 10;
    smoothAlignedEdges false;
    errorReduction 0.75;
    minSnapRelativeTetVolume -1;
    maxGaussGreenCentroid -1;
    baffleAllPointsBoundary false;
}

debug 0;
mergeTolerance 1E-6;
